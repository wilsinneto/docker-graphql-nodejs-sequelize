"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const pug = require("pug");
function pugEngine(conf) {
    return (maildata, cb) => {
        const template = maildata.data.template;
        const ctx = maildata.data.ctx;
        if (!template) {
            return cb();
        }
        const templateFile = path_1.resolve(conf.templateDir, template) + '.pug';
        if (conf.pretty === true) {
            ctx.pretty = true;
        }
        pug.renderFile(templateFile, ctx, (err, html) => {
            if (err) {
                cb(err);
                return;
            }
            maildata.data.html = html;
            cb();
        });
    };
}
exports.pugEngine = pugEngine;
